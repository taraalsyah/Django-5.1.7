{% extends "base.html" %}
{% load socialaccount %}

{% block content %}
<div class="container">
    <h2>Manage Your Connected Accounts</h2>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <h3>Connected Accounts</h3>
    {% if form.accounts %}
        <ul>
            {% for account in form.accounts %}
                <li>
                    <strong>{{ account.get_provider.name }}</strong> - {{ account.account.extra_data.email }}
                    <form method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="account" value="{{ account.account.pk }}">
                        <button type="submit" class="btn btn-danger">Remove</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No connected accounts.</p>
    {% endif %}

    <h3>Add a new account</h3>
    <a class="btn btn-primary" href="{% provider_login_url 'google' process='connect' %}">
        Connect Google Account
    </a>
    

</div>
{% endblock %}
